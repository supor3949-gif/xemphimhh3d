<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Admin – HH3D</title>
  <link rel="stylesheet" href="./assets/style.css">
  <script defer src="./assets/admin.js"></script>
</head>
<body>
  <header class="topbar">
    <a class="brand" href="./index.html" title="Trang chủ">
      <span class="brandIcon">▶</span>
      <span class="brandText">
        <b>XEMPHIMHH3D</b>
        <small>Admin riêng của bạn (LocalStorage) — có thể nâng lên Supabase sau</small>
      </span>
    </a>
    <div class="topbarRight">
      <a class="adminLink" href="./index.html">Trang chủ</a>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="cardHead">
        <div class="headTitle">
          <span class="dot dotOrange"></span>
          <b>Đăng nhập Admin</b>
          <small class="muted">Mặc định: hh3d2026 (đổi trong code admin.js nếu muốn)</small>
        </div>
      </div>

      <div class="adminGrid">
        <div class="formBox">
          <label>Mật khẩu admin</label>
          <input class="input" id="adminPass" type="password" placeholder="Nhập mật khẩu...">
          <button class="btn btnGreen" id="btnLogin" type="button">Đăng nhập</button>
          <div class="muted small" id="loginHint"></div>
        </div>

        <div class="formBox">
          <label>Thiết lập AFF (TikTok/Shopee)</label>
          <div class="muted small">AFF sẽ chạy khi bấm chọn tập (trong movie.html). Desktop mở tab mới, Mobile có thể redirect.</div>

          <label class="mt8">TikTok link (web/universal link)</label>
          <input class="input" id="affTiktok" placeholder="https://vt.tiktok.com/....">

          <label class="mt8">Shopee link (web)</label>
          <input class="input" id="affShopee" placeholder="https://shopee.vn/....">

          <label class="mt8">Tỉ lệ nhảy AFF</label>
          <select class="input" id="affRate">
            <option value="0">0% (tắt)</option>
            <option value="0.3">30%</option>
            <option value="0.5" selected>50% (5/5)</option>
            <option value="1">100% (luôn nhảy)</option>
          </select>

          <label class="mt8">Chia đều TikTok/Shopee?</label>
          <select class="input" id="affSplit">
            <option value="50" selected>50/50</option>
            <option value="70">70/30 (TikTok nhiều hơn)</option>
            <option value="30">30/70 (Shopee nhiều hơn)</option>
          </select>

          <button class="btn mt10" id="btnSaveSettings" type="button">Lưu AFF</button>
          <div class="muted small" id="settingsHint"></div>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="cardHead">
        <div class="headTitle">
          <span class="dot dotBlue"></span>
          <b>Quản lý phim</b>
          <small class="muted">Thêm phim → tự hiện ô phim ở Trang chủ + Lịch + Top + Xếp hạng</small>
        </div>
        <div class="headRight">
          <button class="miniBtn" id="btnSeedDemo" type="button">Thêm demo</button>
          <button class="miniBtn" id="btnExport" type="button">Xuất JSON</button>
          <button class="miniBtn" id="btnImport" type="button">Nhập JSON</button>
          <input id="importFile" type="file" accept="application/json" style="display:none">
        </div>
      </div>

      <div class="adminMovieWrap">
        <div class="formBox">
          <b>Thêm/Sửa phim</b>

          <label class="mt8">ID phim (không dấu, vd: tien-nghich)</label>
          <input class="input" id="m_id" placeholder="tien-nghich">

          <label class="mt8">Tên phim</label>
          <input class="input" id="m_title" placeholder="Tiên Nghịch">

          <label class="mt8">Thể loại</label>
          <input class="input" id="m_genre" placeholder="Tiên hiệp">

          <label class="mt8">Poster URL (hoặc ./images/...)</label>
          <input class="input" id="m_poster" placeholder="./images/anh.jpg">

          <label class="mt8">Xếp hạng Top (1-10, bỏ trống nếu không)</label>
          <input class="input" id="m_top" placeholder="1">

          <label class="mt8">Lịch phim (chọn ngày xuất hiện trên lịch)</label>
          <div class="dayPick" id="m_days"></div>

          <label class="mt8">RAW Vietsub (mỗi dòng: Tập 01|link)</label>
          <textarea class="textarea" id="m_vs" placeholder="Tập 01|https://..."></textarea>

          <label class="mt8">RAW Thuyết minh (mỗi dòng: Tập 01|link)</label>
          <textarea class="textarea" id="m_tm" placeholder="Tập 01|https://..."></textarea>

          <button class="btn btnGreen mt10" id="btnSaveMovie" type="button">Lưu phim</button>
          <div class="muted small" id="movieHint"></div>
        </div>

        <div class="formBox">
          <b>Danh sách phim</b>
          <div class="muted small">Bấm 1 phim để nạp vào form sửa. Nút Xóa sẽ xóa phim đó.</div>
          <div class="movieList" id="movieList"></div>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="cardHead">
        <div class="headTitle">
          <span class="dot dotGray"></span>
          <b>Liên hệ (Footer)</b>
          <small class="muted">Nhập link của bạn để hiện ở Trang chủ</small>
        </div>
      </div>
      <div class="adminGrid">
        <div class="formBox">
          <label>Facebook</label>
          <input class="input" id="c_fb" placeholder="https://facebook.com/...">
          <label class="mt8">Telegram</label>
          <input class="input" id="c_tg" placeholder="https://t.me/...">
          <label class="mt8">Zalo</label>
          <input class="input" id="c_zalo" placeholder="https://zalo.me/...">
          <button class="btn mt10" id="btnSaveContact" type="button">Lưu liên hệ</button>
          <div class="muted small" id="contactHint"></div>
        </div>

        <div class="formBox">
          <b>Ghi chú</b>
          <div class="muted small">
            - Đây là bản chạy bằng LocalStorage (không cần server, không cần DB).<br>
            - Khi muốn lên Supabase: chỉ thay phần load/save trong file JS (đã comment sẵn).<br>
            - Admin chỉ mình bạn biết link + mật khẩu.
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- modal -->
  <div class="modalBack" id="modalBack" aria-hidden="true">
    <div class="modal">
      <div class="modalTop">
        <b id="modalTitle">Thông báo</b>
        <button class="closeBtn" id="closeModal" type="button">Đóng</button>
      </div>
      <div class="modalBody" id="modalBody">...</div>
    </div>
  </div>
</body>
</html>
