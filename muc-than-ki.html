<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M·ª•c Th·∫ßn K√≠ | HH3D</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body{margin:0;font-family:Arial,sans-serif;background:#0f172a;color:#e5e7eb}
    header{background:#020617;padding:16px;text-align:center;font-size:22px;font-weight:800}
    .container{max-width:1100px;margin:0 auto;padding:18px}
    a{color:inherit;text-decoration:none}
    .back{display:inline-block;margin:6px 0 14px;color:#22c55e}
    .wrap{background:#020617;border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:14px}
    .title{font-size:26px;font-weight:900;margin:0}
    .sub{margin:6px 0 0;color:#94a3b8;font-size:13px}
    .player{margin-top:12px;border-radius:14px;overflow:hidden;background:#000}
    video{width:100%;height:auto;display:block}
    .episodes{margin-top:14px;background:#020617;border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:14px}
    .episodesTop{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .episodesTop .hint{color:#94a3b8;font-size:13px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:10px;margin-top:12px}
    .epbtn{cursor:pointer;border:1px solid rgba(255,255,255,.12);background:#0b1020;color:#cbd5e1;padding:10px;border-radius:12px;font-weight:800}
    .epbtn.active{background:#22c55e;color:#062a16;border-color:transparent}
  </style>
</head>

<body>
  <header>üìÅ Xem phim HH3D</header>

  <div class="container">
    <a class="back" href="phim.html">‚Üê Quay v·ªÅ danh s√°ch phim</a>

    <div class="wrap">
      <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <div>
          <h1 class="title" id="filmTitle">M·ª•c Th·∫ßn K√≠</h1>
          <div class="sub" id="filmSub">Ch·ªçn t·∫≠p ƒë·ªÉ xem</div>
        </div>
        <div class="sub">HLS (m3u8)</div>
      </div>

      <div class="player">
        <video id="video" controls playsinline></video>
      </div>
    </div>

    <div class="episodes">
      <div class="episodesTop">
        <div style="font-weight:900">Danh s√°ch t·∫≠p</div>
        <div class="hint"><span id="totalEp">0</span> t·∫≠p</div>
      </div>
      <div id="epGrid" class="grid"></div>
    </div>
  </div>

  <script>
    // ====== C·∫§U H√åNH PHIM ======
    const FILM_TITLE = "M·ª•c Th·∫ßn K√≠";

    // ====== 68 T·∫¨P: EM D√ÅN LINK M3U8 V√ÄO "" ======
    const EPISODES = [
      "", // T·∫≠p 01
      "", // T·∫≠p 02
      "", // T·∫≠p 03
      "", // T·∫≠p 04
      "", // T·∫≠p 05
      "", // T·∫≠p 06
      "", // T·∫≠p 07
      "", // T·∫≠p 08
      "", // T·∫≠p 09
      "", // T·∫≠p 10
      "", // T·∫≠p 11
      "", // T·∫≠p 12
      "", // T·∫≠p 13
      "", // T·∫≠p 14
      "", // T·∫≠p 15
      "", // T·∫≠p 16
      "", // T·∫≠p 17
      "", // T·∫≠p 18
      "", // T·∫≠p 19
      "", // T·∫≠p 20
      "", // T·∫≠p 21
      "", // T·∫≠p 22
      "", // T·∫≠p 23
      "", // T·∫≠p 24
      "", // T·∫≠p 25
      "", // T·∫≠p 26
      "", // T·∫≠p 27
      "", // T·∫≠p 28
      "", // T·∫≠p 29
      "", // T·∫≠p 30
      "", // T·∫≠p 31
      "", // T·∫≠p 32
      "", // T·∫≠p 33
      "", // T·∫≠p 34
      "", // T·∫≠p 35
      "", // T·∫≠p 36
      "", // T·∫≠p 37
      "", // T·∫≠p 38
      "", // T·∫≠p 39
      "", // T·∫≠p 40
      "", // T·∫≠p 41
      "", // T·∫≠p 42
      "", // T·∫≠p 43
      "", // T·∫≠p 44
      "", // T·∫≠p 45
      "", // T·∫≠p 46
      "", // T·∫≠p 47
      "", // T·∫≠p 48
      "", // T·∫≠p 49
      "", // T·∫≠p 50
      "", // T·∫≠p 51
      "", // T·∫≠p 52
      "", // T·∫≠p 53
      "", // T·∫≠p 54
      "", // T·∫≠p 55
      "", // T·∫≠p 56
      "", // T·∫≠p 57
      "", // T·∫≠p 58
      "", // T·∫≠p 59
      "", // T·∫≠p 60
      "", // T·∫≠p 61
      "", // T·∫≠p 62
      "", // T·∫≠p 63
      "", // T·∫≠p 64
      "", // T·∫≠p 65
      "", // T·∫≠p 66
      "", // T·∫≠p 67
      "", // T·∫≠p 68
    ];

    // ====== PLAYER (HLS) ======
    const video = document.getElementById("video");
    let hls = null;

    function playM3U8(url){
      if (!url) {
        alert("T·∫≠p n√†y ch∆∞a c√≥ link m3u8. Em d√°n link v√†o EPISODES tr∆∞·ªõc nha!");
        return;
      }

      // d·ªçn player c≈©
      if (hls) { hls.destroy(); hls = null; }
      video.pause();
      video.removeAttribute("src");
      video.load();

      if (video.canPlayType("application/vnd.apple.mpegurl")) {
        video.src = url; // Safari / iOS
      } else if (window.Hls) {
        hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(video);
      } else {
        alert("Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ HLS.");
      }
      video.play().catch(()=>{});
    }

    // ====== UI ======
    document.getElementById("filmTitle").textContent = FILM_TITLE;
    document.getElementById("totalEp").textContent = EPISODES.length;

    const epGrid = document.getElementById("epGrid");

    function renderEpisodes(activeIndex = 0){
      epGrid.innerHTML = "";
      EPISODES.forEach((_, i) => {
        const btn = document.createElement("button");
        btn.className = "epbtn" + (i === activeIndex ? " active" : "");
        btn.textContent = "T·∫≠p " + String(i+1).padStart(2,"0");
        btn.onclick = () => {
          document.querySelectorAll(".epbtn").forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          document.getElementById("filmSub").textContent = `${FILM_TITLE} ‚Ä¢ T·∫≠p ${String(i+1).padStart(2,"0")}`;
          playM3U8(EPISODES[i]);
        };
        epGrid.appendChild(btn);
      });
      document.getElementById("filmSub").textContent = `${FILM_TITLE} ‚Ä¢ T·∫≠p ${String(activeIndex+1).padStart(2,"0")}`;
    }

    renderEpisodes(0);
    // N·∫øu em mu·ªën t·ª± ch·∫°y t·∫≠p 1 khi c√≥ link:
    // playM3U8(EPISODES[0]);
  </script>
</body>
</html>
