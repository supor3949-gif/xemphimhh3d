<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Danh s√°ch phim | HH3D</title>
  <style>
    body{margin:0;font-family:Arial,sans-serif;background:#0f172a;color:#e5e7eb}
    header{background:#020617;padding:16px;text-align:center;font-size:22px;font-weight:800}
    .container{max-width:1100px;margin:0 auto;padding:18px}
    a{color:inherit;text-decoration:none}
    .toprow{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .back{display:inline-block;margin:6px 0 14px;color:#22c55e}
    .hint{color:#94a3b8;font-size:13px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px}
    .card{background:#020617;border-radius:12px;padding:12px;text-align:center;border:1px solid rgba(255,255,255,.06);cursor:pointer}
    .card:hover{border-color:rgba(34,197,94,.35)}
    .poster{
      width:100%;
      aspect-ratio:2/3;
      border-radius:10px;
      background:#0b1020;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    .poster img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .poster .noimg{
      position:absolute;
      color:#94a3b8;
      font-weight:800;
      letter-spacing:.5px;
      font-size:12px;
    }
    .card h3{font-size:14px;margin:10px 0 0;line-height:1.2}
    .pager{display:flex;gap:8px;flex-wrap:wrap;margin:18px 0}
    .pager button{cursor:pointer;border:1px solid rgba(255,255,255,.12);background:#0b1020;color:#cbd5e1;padding:8px 10px;border-radius:10px}
    .pager button.active{background:#22c55e;color:#062a16;border-color:transparent;font-weight:800}
  </style>
</head>
<body>
  <header>üìÅ Danh s√°ch phim HH3D</header>

  <div class="container">
    <div class="toprow">
      <a class="back" href="index.html">‚Üê Quay v·ªÅ trang ch·ªß</a>
      <div class="hint" id="hint">20 trang ‚Ä¢ 10 phim / trang</div>
    </div>

    <div id="grid" class="grid"></div>
    <div id="pager" class="pager"></div>
  </div>

  <script>
    const TOTAL_PAGES = 20;
    const PER_PAGE = 10;

    // ‚úÖ Danh s√°ch phim th·∫≠t (hi·ªán t·∫°i b·∫°n m·ªõi c√≥ 3 phim)
    // poster: ƒë·ªÉ ·∫£nh trong th∆∞ m·ª•c /images r·ªìi tr·ªè nh∆∞ "images/ten-anh.jpg"
    // episodesCount: s·ªë t·∫≠p (vd Ti√™n Ngh·ªãch 126)
    const films = [
      { id: 1, slug: "tien-nghich", title: "Ti√™n Ngh·ªãch", poster: "images/anh-tien-nghich.jpg", episodesCount: 126 },
      { id: 2, slug: "dau-pha-thuong-khung", title: "ƒê·∫•u Ph√° Th∆∞∆°ng Khung", poster: "", episodesCount: 0 },
      { id: 3, slug: "the-gioi-hoan-my", title: "Th·∫ø Gi·ªõi Ho√†n M·ªπ", poster: "", episodesCount: 0 },
    ];

    // ‚úÖ N·∫øu mu·ªën v·∫´n ƒë·ªß 200 phim demo ƒë·ªÉ ph√¢n trang ƒë·∫πp: t·∫°o phim gi·∫£ (kh√¥ng m·ªü xem)
    // (Ph·∫ßn n√†y gi√∫p b·∫°n v·∫´n c√≥ 20 trang * 10 phim)
    while (films.length < TOTAL_PAGES * PER_PAGE) {
      const n = films.length + 1;
      films.push({ id: n, slug: "hh3d-" + n, title: "HH3D " + n, poster: "", episodesCount: 0 });
    }

    function getPageFromURL(){
      const u = new URL(location.href);
      const p = parseInt(u.searchParams.get("page") || "1", 10);
      return Math.min(Math.max(p, 1), TOTAL_PAGES);
    }

    function goPage(p){
      const u = new URL(location.href);
      u.searchParams.set("page", String(p));
      location.href = u.toString();
    }

    function render(page){
      const grid = document.getElementById("grid");
      const pager = document.getElementById("pager");

      const start = (page - 1) * PER_PAGE;
      const items = films.slice(start, start + PER_PAGE);

      grid.innerHTML = "";
      items.forEach(film => {
        const card = document.createElement("div");
        card.className = "card";

        // ‚úÖ Ch·ªâ cho b·∫•m m·ªü xem khi phim c√≥ episodesCount > 0
        card.onclick = () => {
          if (!film.episodesCount || film.episodesCount <= 0) {
            alert("Phim n√†y ch∆∞a c√≥ t·∫≠p. B·∫°n c·∫≠p nh·∫≠t episodesCount tr∆∞·ªõc nha!");
            return;
          }
          location.href = `xem.html?film=${encodeURIComponent(film.slug)}`;
        };

        const posterHTML = film.poster
          ? `<img src="${film.poster}" alt="${film.title}" loading="lazy">`
          : `<div class="noimg">NO IMAGE</div>`;

        card.innerHTML = `
          <div class="poster">${posterHTML}</div>
          <h3>${film.title}</h3>
        `;
        grid.appendChild(card);
      });

      // pager
      pager.innerHTML = "";
      for (let p = 1; p <= TOTAL_PAGES; p++){
        const btn = document.createElement("button");
        btn.textContent = p;
        if (p === page) btn.classList.add("active");
        btn.onclick = () => goPage(p);
        pager.appendChild(btn);
      }
    }

    render(getPageFromURL());
  </script>
</body>
</html>
